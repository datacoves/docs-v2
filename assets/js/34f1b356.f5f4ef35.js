"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2061],{16695:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/delivery_mode_airflow_connection-769de640d99674e9c4eac412c67bd2ab.png"},28453:(e,n,o)=>{o.d(n,{R:()=>a,x:()=>r});var t=o(96540);const i={},s=t.createContext(i);function a(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(s.Provider,{value:n},e.children)}},40437:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>l,frontMatter:()=>a,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"how-tos/airflow/use-key-pair-authentication","title":"Airflow - Use Key-Pair Authentication","description":"This documentation will presume you have knowledge of Datacoves\' Service Connections and how to configure them.","source":"@site/docs/how-tos/airflow/use-key-pair-authentication.md","sourceDirName":"how-tos/airflow","slug":"/how-tos/airflow/use-key-pair-authentication","permalink":"/docusaurus-test/docs/how-tos/airflow/use-key-pair-authentication","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"title":"Airflow - Use Key-Pair Authentication","sidebar_position":10},"sidebar":"tutorialSidebar","previous":{"title":"Airflow - Trigger a DAG using Datasets","permalink":"/docusaurus-test/docs/how-tos/airflow/api-triggered-dag"},"next":{"title":"DAGs - Add Dag Documentation","permalink":"/docusaurus-test/docs/how-tos/airflow/create-dag-level-docs"}}');var i=o(74848),s=o(28453);const a={title:"Airflow - Use Key-Pair Authentication",sidebar_position:10},r="Using Key-Pair Authentication in Airflow",c={},d=[{value:"Usage",id:"usage",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"using-key-pair-authentication-in-airflow",children:"Using Key-Pair Authentication in Airflow"})}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["This documentation will presume you have knowledge of Datacoves' ",(0,i.jsx)(n.a,{href:"/docusaurus-test/docs/how-tos/datacoves/how_to_service_connections",children:"Service Connections"})," and how to configure them."]})}),"\n",(0,i.jsxs)(n.p,{children:["Using RSA Keys is only supported through Airflow Connections, not Environment Variables. Make sure your Datacoves Service Connection is using this ",(0,i.jsx)(n.code,{children:"delivery mode"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"alt text",src:o(16695).A+"",width:"1964",height:"1164"})}),"\n",(0,i.jsxs)(n.p,{children:["Also, make sure to select ",(0,i.jsx)(n.code,{children:"Authentication mechanism: RSA Key-pair"})," and ",(0,i.jsx)(n.a,{href:"https://docs.snowflake.com/en/user-guide/key-pair-auth#assign-the-public-key-to-a-snowflake-user",children:"assign the generated key to your Snowflake user"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"authentication_mechanism_copy",src:o(59451).A+"",width:"1834",height:"1296"})}),"\n",(0,i.jsx)(n.p,{children:"Once you have properly configured your Service Connection, your Airflow instance will restart. This process may take up to 10 minutes."}),"\n",(0,i.jsxs)(n.p,{children:["To confirm the above worked correctly, you can access your Airflow ",(0,i.jsx)(n.code,{children:"Admin -> Connections"})," menu, and make sure your Service Connection  is now an Airflow Connection."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"airflow_admin_connections",src:o(69899).A+"",width:"1760",height:"980"})}),"\n",(0,i.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,i.jsxs)(n.p,{children:["Thanks to our new ",(0,i.jsxs)(n.a,{href:"/docusaurus-test/docs/reference/airflow/datacoves-decorators",children:[(0,i.jsx)(n.code,{children:"dbt"})," Airflow Decorator"]}),", you can run dbt against your warehouse using the Airflow Connection you just created, by simply passing the Service Connection name to our decorator's ",(0,i.jsx)(n.code,{children:"connection_id"})," parameter."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'@dag(\n    [...]\n)\ndef dbt_dag():\n\n    @task.datacoves_dbt(\n        connection_id="main_key_pair" # your service connection name\n    )\n    def run_dbt():\n        return "dbt debug" # return any dbt command\n\n    run_dbt()\n\ndbt_dag()\n'})})]})}function l(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},59451:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/authentication_mechanism_copy-6c22d65afbb6f98eaa30cd83f61523d4.png"},69899:(e,n,o)=>{o.d(n,{A:()=>t});const t=o.p+"assets/images/airflow_admin_connections-6b71e1e7d5cd5c608005a403de719a92.png"}}]);