"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7564],{28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>r});var a=n(96540);const s={},o=a.createContext(s);function i(e){const t=a.useContext(o);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(o.Provider,{value:t},e.children)}},30834:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>l,frontMatter:()=>i,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"how-tos/datahub/how_to_datahub_dbt","title":"Configure dbt metadata ingestion","description":"Prerequisites","source":"@site/docs/how-tos/datahub/how_to_datahub_dbt.md","sourceDirName":"how-tos/datahub","slug":"/how-tos/datahub/how_to_datahub_dbt","permalink":"/docusaurus-test/docs/how-tos/datahub/how_to_datahub_dbt","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":59,"frontMatter":{"title":"Configure dbt metadata ingestion","sidebar_position":59},"sidebar":"tutorialSidebar","previous":{"title":"Datahub","permalink":"/docusaurus-test/docs/how-tos/datahub/"},"next":{"title":"Configure Snowflake metadata ingestion","permalink":"/docusaurus-test/docs/how-tos/datahub/how_to_datahub_snowflake"}}');var s=n(74848),o=n(28453);const i={title:"Configure dbt metadata ingestion",sidebar_position:59},r="Ingesting dbt Metadata into DataHub",c={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Configuring the dbt Source in DataHub",id:"configuring-the-dbt-source-in-datahub",level:2},{value:"Sample Configuration",id:"sample-configuration",level:3},{value:"Configuring DataHub for a Second dbt Source",id:"configuring-datahub-for-a-second-dbt-source",level:2},{value:"Sample Configuration",id:"sample-configuration-1",level:3}];function u(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"ingesting-dbt-metadata-into-datahub",children:"Ingesting dbt Metadata into DataHub"})}),"\n",(0,s.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(t.p,{children:["DataHub utilizes ",(0,s.jsx)(t.a,{href:"https://datahubproject.io/docs/generated/ingestion/sources/dbt/#module-dbt",children:"dbt artifacts"})," to populate metadata. Before configuring DataHub, ensure that dbt artifacts are available in an S3 bucket."]}),"\n",(0,s.jsx)(t.p,{children:"These artifacts include:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.code,{children:"catalog.json"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.code,{children:"manifest.json"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.code,{children:"run_results.json"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.code,{children:"sources.json"})}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"configuring-the-dbt-source-in-datahub",children:"Configuring the dbt Source in DataHub"}),"\n",(0,s.jsxs)(t.p,{children:["To ingest dbt metadata, configure the dbt source in DataHub. Refer to the ",(0,s.jsx)(t.a,{href:"https://datahubproject.io/docs/generated/ingestion/sources/dbt/#config-details",children:"official documentation"})," for details."]}),"\n",(0,s.jsx)(t.h3,{id:"sample-configuration",children:"Sample Configuration"}),"\n",(0,s.jsx)(t.p,{children:"The following sample demonstrates how to configure a dbt ingestion source in DataHub."}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["This configuration requires a DataHub secret (",(0,s.jsx)(t.code,{children:"S3_secret_key"}),") for secure access to S3. Ensure that this secret is created before proceeding."]})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:'source:\n  type: dbt\n  config:\n    platform_instance: balboa\n    target_platform: snowflake\n    manifest_path: "s3://<s3-bucket>/dbt_artifacts/manifest.json"\n    catalog_path: "s3://<s3-bucket>/dbt_artifacts/catalog.json"\n    sources_path: "s3://<s3-bucket>/dbt_artifacts/sources.json"\n    test_results_path: "s3://<s3-bucket>/dbt_artifacts/run_results.json"\n    include_column_lineage: true\n    aws_connection:\n      aws_access_key_id: ABC.....\n      aws_secret_access_key: "${S3_secret_key}"\n      aws_region: us-west-2\n    git_info:\n      repo: github.com/datacoves/balboa\n      url_template: "{repo_url}/blob/{branch}/transform/{file_path}"\n\n'})}),"\n",(0,s.jsx)(t.h2,{id:"configuring-datahub-for-a-second-dbt-source",children:"Configuring DataHub for a Second dbt Source"}),"\n",(0,s.jsxs)(t.p,{children:["When using ",(0,s.jsx)(t.strong,{children:"Datacoves Mesh"})," (also known as dbt Mesh), you can ingest metadata from multiple dbt projects."]}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["To prevent ",(0,s.jsx)(t.strong,{children:"duplicate nodes"}),", exclude the upstream project by specifying patterns to deny in the ",(0,s.jsx)(t.code,{children:"node_name_pattern"})," section."]})}),"\n",(0,s.jsx)(t.h3,{id:"sample-configuration-1",children:"Sample Configuration"}),"\n",(0,s.jsx)(t.p,{children:"The following configuration demonstrates how to add a second dbt source in DataHub:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:'source:\n  type: dbt\n  config:\n    platform_instance: great_bay\n    target_platform: snowflake\n    manifest_path: "s3://<s3-bucket>/dbt_artifacts_great_bay/manifest.json"\n    catalog_path: "s3://<s3-bucket>/dbt_artifacts_great_bay/catalog.json"\n    sources_path: "s3://<s3-bucket>/dbt_artifacts_great_bay/sources.json"\n    test_results_path: "s3://<s3-bucket>/dbt_artifacts_great_bay/run_results.json"\n    \n    # Prevent duplication of upstream nodes\n    entities_enabled:\n      sources: No\n\n    # Stateful ingestion settings\n    stateful_ingestion:\n      enabled: false\n      remove_stale_metadata: true\n\n    include_column_lineage: true\n    convert_column_urns_to_lowercase: false\n    skip_sources_in_lineage: true\n\n    # AWS credentials (requires secret `S3_secret_key`)\n    aws_connection:\n      aws_access_key_id: ABC.....\n      aws_secret_access_key: "${S3_secret_key}"\n      aws_region: us-west-2\n\n    # Git repository information\n    git_info:\n      repo: github.com/datacoves/great_bay\n      url_template: "{repo_url}/blob/{branch}/transform/{file_path}"\n\n    # Exclude upstream dbt project nodes to prevent duplication\n    node_name_pattern:\n      deny:\n        - "model.balboa.*"\n        - "seed.balboa.*"\n'})})]})}function l(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);